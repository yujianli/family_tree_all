(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/personalInfo/personalInfo"],{2009:function(e,a,t){"use strict";(function(e,n){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(t("9263")),i=l(t("d825")),s=l(t("e016"));function l(e){return e&&e.__esModule?e:{default:e}}var r={data:function(){return{arr:{sex:o.default["sex"],zodiac:o.default["zodiac"],nationality:o.default["nationality"],birthTime:o.default["birthTime"],corporeity:o.default["corporeity"],bloodType:o.default["bloodType"],constellation:o.default["constellation"]},idx:{sex:0,zodiac:0,nationality:0,birthTime:0,corporeity:0,bloodType:0,constellation:0},birthDate:"请选择",passingAwayDate:"请选择",startDate:i.default.getDate("start"),endDate:i.default.getDate("end"),isPassedAway:!1,baseInfo:{userId:"",name:"",sex:"",birthPlace:"",placeResidence:"",mobile:"",headUrl:"../../static/images/avatar.png",birth:"",bloodType:"",birthTime:"",fixedTelephone:"",nationality:"",zodiac:"",corporeity:"",gene:"",brief:"",language:"zh_CN",constellation:"",career:"",emailAddress:"",isPassedAway:0,temperament:"",idCard:""}}},computed:{imageUrl:function(){if(this.baseInfo.headUrl)return this.$common.picPrefix()+this.baseInfo.headUrl}},filters:{formatDate:function(e){return e?i.default.dateFormat(e):"请选择"}},onLoad:function(e){this.loadData(e.id)},methods:{loadData:function(a){var t=this;this.$http.get("base/detailBase",{baseId:a,language:"zn_CH"}).then(function(a){if(200===a.data.code){var n=a.data.data.baseInfo;i.default.loadObj(t.baseInfo,n),t.initProp("sex",n.sex),t.initProp("zodiac",n.zodiac),t.initProp("nationality",n.nationality),t.initProp("birthTime",n.birthTime),t.initProp("corporeity",n.corporeity),t.initProp("bloodType",n.bloodType),t.initProp("constellation",n.constellation),t.date=n.birth,t.isPassedAway=1==n.birth}else e.showToast({title:a.data.message,icon:"none"})})},sexBindPickerChange:function(e){this.sexIndex=e.target.value,this.selProp("sex",e.target.value)},nationalityBindPickerChange:function(e){this.selProp("nationality",e.target.value)},zodiacBindPickerChange:function(e){this.selProp("zodiac",e.target.value)},birthTimeBindPickerChange:function(e){this.selProp("birthTime",e.target.value)},bindDateChange:function(e){var a=e.target.value;console.log(n(e.target.value," at pages\\personalInfo\\personalInfo.vue:235")),this.baseInfo.birth=a,console.log(n(a," at pages\\personalInfo\\personalInfo.vue:243")),this.birthDate=a},switchChange:function(e){this.isPassedAway=e.target.value,this.baseInfo.isPassedAway=e.target.value?1:0,console.log(n("是否在世，携带值为",this.baseInfo.isPassedAway," at pages\\personalInfo\\personalInfo.vue:251"))},bindPassingAwayDateChange:function(e){console.log(n(e.target.value," at pages\\personalInfo\\personalInfo.vue:254"));var a=e.target.value;this.isPassedAway?(this.baseInfo.passingAway=a,this.passingAwayDate=a):(this.baseInfo.passingAway="",this.passingAwayDate="请选择")},corporeityBindPickerChange:function(e){this.selProp("corporeity",e.target.value)},bloodTypeBindPickerChange:function(e){this.selProp("bloodType",e.target.value)},constellationBindPickerChange:function(e){this.selProp("constellation",e.target.value)},selProp:function(e,a){this.idx[e]=a,this.baseInfo[e]=o.default[e][a].key},initProp:function(e,a){console.log(n(o.default[e]," at pages\\personalInfo\\personalInfo.vue:280"));for(var t=0;t<o.default[e].length;t++)if(o.default[e][t].key===a){this.idx[e]=t;break}},regValid:function(a,t){var n="";switch(a){case"idcard":n=s.default.idcard(t);break;case"email":n=s.default.email(t);break;case"telephone":n=s.default.telephone(t);break;case"mobile":n=s.default.mobile(t);break}n&&e.showToast({title:n,icon:"none"})},openAlbum:function(){var a=this.$common.uploadUrl(),t=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(o){console.log(n(JSON.stringify(o.tempFilePaths)," at pages\\personalInfo\\personalInfo.vue:318"));var i=o.tempFilePaths,s=e.getStorageSync("USER").token;new Promise(function(t,o){e.uploadFile({url:a,header:{token:s},filePath:i[0],name:"file",formData:null,success:function(e){console.log(n(e.data," at pages\\personalInfo\\personalInfo.vue:329")),t(JSON.parse(e.data).name)},fail:function(e){console.log(n("fail upload log"+JSON.stringify(e)," at pages\\personalInfo\\personalInfo.vue:333")),o(e)}})}).then(function(e){t.baseInfo.headUrl=e,console.log(n(e," at pages\\personalInfo\\personalInfo.vue:339"))})},fail:function(e){console.log(n(JSON.stringify(e)," at pages\\personalInfo\\personalInfo.vue:344"))},complete:function(e){console.log(n(JSON.stringify(e)," at pages\\personalInfo\\personalInfo.vue:347"))}})},save:function(){var a=this.baseInfo;a["dateOfBirth"]=i.default.dateFormat(this.baseInfo.birth),delete a["birth"],this.isPassedAway||(this.baseInfo.passingAway="",this.passingAwayDate="请选择",delete a["passingAway"]),this.$http.post("base/editBase",a).then(function(a){200===a.data.code?e.showToast({title:"保存成功",icon:"none"}):e.showToast({title:"保存失败",icon:"none"})})},onNavigationBarButtonTap:function(e){this.save()}}};a.default=r}).call(this,t("6e42")["default"],t("0de9")["default"])},"2cb6":function(e,a,t){"use strict";t.r(a);var n=t("5649"),o=t("640a");for(var i in o)"default"!==i&&function(e){t.d(a,e,function(){return o[e]})}(i);t("c91c");var s=t("2877"),l=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"6b387281",null);a["default"]=l.exports},5649:function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement,t=(e._self._c,e._f("formatDate")(e.baseInfo.birth)),n=e._f("formatDate")(e.baseInfo.passingAway);e.$mp.data=Object.assign({},{$root:{f0:t,f1:n}})},o=[];t.d(a,"a",function(){return n}),t.d(a,"b",function(){return o})},"640a":function(e,a,t){"use strict";t.r(a);var n=t("2009"),o=t.n(n);for(var i in n)"default"!==i&&function(e){t.d(a,e,function(){return n[e]})}(i);a["default"]=o.a},c91c:function(e,a,t){"use strict";var n=t("ca60"),o=t.n(n);o.a},ca60:function(e,a,t){},e1bf:function(e,a,t){"use strict";(function(e){t("a45e"),t("921b");n(t("66fd"));var a=n(t("2cb6"));function n(e){return e&&e.__esModule?e:{default:e}}e(a.default)}).call(this,t("6e42")["createPage"])}},[["e1bf","common/runtime","common/vendor"]]]);